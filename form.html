<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gauti konsultacijƒÖ - Finansi≈°kai ra≈°tingi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="form-dark">
    

    <!-- Logo Carousel -->
    <section class="logo-carousel">
        <div class="container">
            <div class="logo-carousel-content">
                <div class="logo-track">
                    <div class="logo-item">
                        <img src="logos/freedom24-logo.png" alt="Freedom24 - NASDAQ listinguojama investicij≈≥ platforma" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/interactive-brokers-logo.png" alt="Interactive Brokers - tarptautinis investicij≈≥ brokeris" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/nasdaq-logo.png" alt="NASDAQ - pasaulinƒó akcij≈≥ bir≈æa" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/lietuvos-bankas-logo.png" alt="Lietuvos Bankas - Lietuvos centrinis bankas" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/mifid-II-logo.png" alt="MiFID II - Europos investicij≈≥ reguliavimo direktyva" />
                    </div>
                    <!-- Duplicate logos for seamless loop -->
                    <div class="logo-item">
                        <img src="logos/freedom24-logo.png" alt="Freedom24 - NASDAQ listinguojama investicij≈≥ platforma" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/interactive-brokers-logo.png" alt="Interactive Brokers - tarptautinis investicij≈≥ brokeris" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/nasdaq-logo.png" alt="NASDAQ - pasaulinƒó akcij≈≥ bir≈æa" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/lietuvos-bankas-logo.png" alt="Lietuvos Bankas - Lietuvos centrinis bankas" />
                    </div>
                    <div class="logo-item">
                        <img src="logos/mifid-II-logo.png" alt="MiFID II - Europos investicij≈≥ reguliavimo direktyva" />
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Form Section -->
    <section class="form-section">
        <div class="container">
            <div class="form-content">
                <div class="form-header">
                    <h1 class="form-title">Gauti konsultacijƒÖ</h1>
                    <p class="form-subtitle">U≈æpildykite formƒÖ ir mes susisieksime su jumis per 24 valandas</p>
                </div>

                <div class="form-benefits">
                    <h3>KƒÖ gausite:</h3>
                    <div class="urgency-banner">
                        <i class="fas fa-clock"></i>
                        <span class="urgency-text white-text">Nemokama konsultacija tik iki rugsƒójo 31 d.!</span>
                    </div>
                    <div class="benefits-list">
                        <div class="benefit-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Nemokama 60 min. konsultacija</span>
                        </div>
                        <div class="benefit-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Asmeninis investavimo planas</span>
                        </div>
                        <div class="benefit-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Mokesƒçi≈≥ optimizavimo rekomendacijos</span>
                        </div>
                        <div class="benefit-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Portfelio diversifikacijos patarimai</span>
                        </div>
                    </div>
                </div>

                <div class="form-container">
                    <form class="consultation-form" id="consultationForm">
                        <div class="form-group">
                            <label for="name" class="form-label">
                                <i class="fas fa-user"></i>
                                Vardas ir pavardƒó *
                            </label>
                            <input type="text" id="name" name="name" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label">
                                <i class="fas fa-envelope"></i>
                                El. pa≈°tas *
                            </label>
                            <input type="email" id="email" name="email" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="phone" class="form-label">
                                <i class="fas fa-phone"></i>
                                Telefono numeris *
                            </label>
                            <div class="phone-input-container">
                                <div class="phone-prefix-wrapper">
                                    <span class="flag-icon">üá±üáπ</span>
                                    <select id="phonePrefix" name="phonePrefix" class="phone-prefix-select" required>
                                        <option value="+370">+370</option>
                                    </select>
                                </div>
                                <input type="tel" id="phone" name="phone" class="phone-number-input" 
                                       placeholder="XXXXXXXX" 
                                       pattern="^[0-9]{8}$" 
                                       title="ƒÆveskite telefono numerƒØ be +370 prefikso" 
                                       required>
                            </div>
                            <small class="form-help">Pvz.: 61234567</small>
                        </div>

                        <div class="form-group">
                            <label for="company" class="form-label">
                                <i class="fas fa-building"></i>
                                ƒÆmonƒós pavadinimas
                            </label>
                            <input type="text" id="company" name="company" class="form-input">
                        </div>

                        <div class="form-group">
                            <label for="position" class="form-label">
                                <i class="fas fa-briefcase"></i>
                                Pareigos
                            </label>
                            <input type="text" id="position" name="position" class="form-input">
                        </div>

                        <div class="form-group">
                            <label for="investment" class="form-label">
                                <i class="fas fa-euro-sign"></i>
                                Investuojama suma (‚Ç¨)
                            </label>
                            <select id="investment" name="investment" class="form-select">
                                <option value="">Pasirinkite...</option>
                                <option value="10k-50k">‚Ç¨10,000 - ‚Ç¨50,000</option>
                                <option value="50k-100k">‚Ç¨50,000 - ‚Ç¨100,000</option>
                                <option value="100k-250k">‚Ç¨100,000 - ‚Ç¨250,000</option>
                                <option value="250k-500k">‚Ç¨250,000 - ‚Ç¨500,000</option>
                                <option value="500k+">‚Ç¨500,000+</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="experience" class="form-label">
                                <i class="fas fa-chart-line"></i>
                                Investavimo patirtis
                            </label>
                            <select id="experience" name="experience" class="form-select">
                                <option value="">Pasirinkite...</option>
                                <option value="beginner">Pradedantysis</option>
                                <option value="intermediate">Vidutinis</option>
                                <option value="advanced">Pa≈æengƒôs</option>
                                <option value="expert">Ekspertas</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="goals" class="form-label">
                                <i class="fas fa-target"></i>
                                Investavimo tikslai
                            </label>
                            <textarea id="goals" name="goals" class="form-textarea" rows="4" placeholder="Apra≈°ykite savo investavimo tikslus ir l≈´kesƒçius..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="message" class="form-label">
                                <i class="fas fa-comment"></i>
                                Papildoma informacija
                            </label>
                            <textarea id="message" name="message" class="form-textarea" rows="3" placeholder="Turite klausim≈≥ ar papildom≈≥ informacijos?"></textarea>
                        </div>

                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="privacy" name="privacy" required>
                                <span class="checkmark"></span>
                                Sutinku su <a href="#" class="privacy-link">privatumo politika</a> *
                            </label>
                        </div>

                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="newsletter" name="newsletter">
                                <span class="checkmark"></span>
                                Noriu gauti investavimo patarimus ir naujienas
                            </label>
                        </div>

                        <button type="submit" class="form-submit">
                            <i class="fas fa-paper-plane"></i>
                            Si≈≥sti u≈æklausƒÖ
                        </button>
                        <a href="index.html" class="back-button" aria-label="GrƒØ≈æti ƒØ pagrindinƒØ">
                            <i class="fas fa-arrow-left"></i>
                            GrƒØ≈æti atgal
                        </a>
                    </form>
                </div>

            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="https://go.finansiskairastingi.lt/wp-content/uploads/2024/11/Finansiskai_Rastingi_final_logo-06.svg" alt="Finansi≈°kai Ra≈°tingi" />
                </div>
                <div class="footer-links">
                    <a href="https://go.finansiskairastingi.lt/privatumo-politika/">Privatumo politika</a>
                    <a href="https://go.finansiskairastingi.lt/pristatymo-ir-grazinimo-taisykles/">Pristatymas ir grƒÖ≈æinimas</a>
                    <a href="https://go.finansiskairastingi.lt/privatumo-politika/">Kontaktai</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Form submission
        document.getElementById('consultationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Enhanced validation
            if (!data.name || !data.email || !data.phone || !data.privacy) {
                alert('Pra≈°ome u≈æpildyti visus privalomus laukus');
                return;
            }
            
            // Phone number format validation
            const phonePattern = /^[0-9]{8}$/;
            if (!phonePattern.test(data.phone)) {
                alert('Telefono numeris turi b≈´ti formatu XXXXXXXXX (pvz.: 61234567)');
                document.getElementById('phone').focus();
                return;
            }
            
            // Combine prefix and phone number for CRM
            const fullPhoneNumber = data.phonePrefix + data.phone;
            
            // Prepare data for CRM
            const crmData = {
                name: data.name,
                email: data.email,
                phone: fullPhoneNumber,
                company: data.company || '',
                position: data.position || '',
                investment_amount: data.investment || '',
                experience: data.experience || '',
                goals: data.goals || '',
                message: data.message || '',
                newsletter: data.newsletter ? 'Yes' : 'No',
                privacy_accepted: data.privacy ? 'Yes' : 'No',
                source: 'Website Form',
                timestamp: new Date().toISOString(),
                utm_source: getUrlParameter('utm_source') || 'direct',
                utm_medium: getUrlParameter('utm_medium') || 'organic',
                utm_campaign: getUrlParameter('utm_campaign') || 'consultation_form'
            };

            // Submit to CRM
            submitToCRM(crmData);
        });

        // Phone number formatting and validation
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            // Limit to 8 digits
            if (value.length > 8) {
                value = value.substring(0, 8);
            }
            
            e.target.value = value;
            
            // Validate format
            const phonePattern = /^[0-9]{8}$/;
            if (value.length === 8 && !phonePattern.test(value)) {
                e.target.setCustomValidity('Telefono numeris turi b≈´ti formatu XXXXXXXXX');
            } else {
                e.target.setCustomValidity('');
            }
        });

        // Additional validation on blur
        document.getElementById('phone').addEventListener('blur', function(e) {
            const phonePattern = /^[0-9]{8}$/;
            if (e.target.value && !phonePattern.test(e.target.value)) {
                e.target.setCustomValidity('Telefono numeris turi b≈´ti formatu XXXXXXXXX');
                e.target.reportValidity();
            } else {
                e.target.setCustomValidity('');
            }
        });

        // Utility function to get URL parameters
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // CRM Integration Function
        async function submitToCRM(data) {
            const submitBtn = document.querySelector('.form-submit');
            const originalText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Siunƒçiama...';
            submitBtn.disabled = true;
            
            try {
                // Option 1: Send to webhook endpoint (recommended for most CRMs)
                const webhookUrl = 'https://hooks.zapier.com/hooks/catch/YOUR_WEBHOOK_ID/'; // Replace with your webhook URL
                
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    // Success
                    showSuccessMessage();
                    document.getElementById('consultationForm').reset();
                } else {
                    throw new Error('Network response was not ok');
                }
                
            } catch (error) {
                console.error('CRM submission error:', error);
                
                // Fallback: Send to email or alternative endpoint
                try {
                    await submitToEmail(data);
                } catch (emailError) {
                    console.error('Email fallback error:', emailError);
                    showErrorMessage();
                }
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }

        // Email fallback function
        async function submitToEmail(data) {
            const emailEndpoint = '/api/send-email'; // Replace with your email endpoint
            
            const response = await fetch(emailEndpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    to: 'info@finansiskairastingi.lt', // Replace with your email
                    subject: 'Nauja konsultacijos u≈æklausa',
                    body: `
Nauja konsultacijos u≈æklausa:

Vardas: ${data.name}
El. pa≈°tas: ${data.email}
Telefonas: ${data.phone}
ƒÆmonƒó: ${data.company}
Pareigos: ${data.position}
Investavimo suma: ${data.investment_amount}
Patirtis: ${data.experience}
Tikslai: ${data.goals}
Papildoma informacija: ${data.message}
Naujienlai≈°kis: ${data.newsletter}
Privatumo politika: ${data.privacy_accepted}

≈†altinis: ${data.source}
Laikas: ${data.timestamp}
UTM ≈°altinis: ${data.utm_source}
UTM kanalas: ${data.utm_medium}
UTM kampanija: ${data.utm_campaign}
                    `
                })
            });

            if (!response.ok) {
                throw new Error('Email submission failed');
            }
        }

        // Success message
        function showSuccessMessage() {
            alert('Aƒçi≈´! J≈´s≈≥ u≈æklausa sƒókmingai i≈°si≈≥sta. Susisieksime su jumis per 24 valandas.');
        }

        // Error message
        function showErrorMessage() {
            alert('Atsipra≈°ome, ƒØvyko klaida siunƒçiant u≈æklausƒÖ. Pra≈°ome bandyti dar kartƒÖ arba susisiekti tiesiogiai.');
        }

        // Alternative CRM integrations (uncomment and configure as needed)
        
        // HubSpot integration
        /*
        function submitToHubSpot(data) {
            const hubspotFormId = 'YOUR_HUBSPOT_FORM_ID';
            const hubspotPortalId = 'YOUR_HUBSPOT_PORTAL_ID';
            
            const formData = new FormData();
            formData.append('hs_context', JSON.stringify({
                hutk: getCookie('hubspotutk'),
                pageUri: window.location.href,
                pageName: document.title
            }));
            
            Object.keys(data).forEach(key => {
                formData.append(key, data[key]);
            });
            
            fetch(`https://api.hsforms.com/submissions/v3/integration/submit/${hubspotPortalId}/${hubspotFormId}`, {
                method: 'POST',
                body: formData
            });
        }
        */

        // Salesforce integration
        /*
        function submitToSalesforce(data) {
            const salesforceEndpoint = 'https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8';
            
            const formData = new FormData();
            formData.append('oid', 'YOUR_SALESFORCE_ORG_ID');
            formData.append('first_name', data.name.split(' ')[0]);
            formData.append('last_name', data.name.split(' ').slice(1).join(' '));
            formData.append('email', data.email);
            formData.append('phone', data.phone);
            formData.append('company', data.company);
            formData.append('lead_source', 'Website');
            
            fetch(salesforceEndpoint, {
                method: 'POST',
                body: formData
            });
        }
        */

        // Pipedrive integration
        /*
        function submitToPipedrive(data) {
            const pipedriveApiKey = 'YOUR_PIPEDRIVE_API_KEY';
            const pipedriveEndpoint = 'https://api.pipedrive.com/v1/persons';
            
            fetch(pipedriveEndpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${pipedriveApiKey}`
                },
                body: JSON.stringify({
                    name: data.name,
                    email: [{
                        value: data.email,
                        primary: true
                    }],
                    phone: [{
                        value: data.phone,
                        primary: true
                    }],
                    org_name: data.company
                })
            });
        }
        */
    </script>
</body>
</html>
